# Email Camp

Система учёта писем для лагеря.

## MVP-функционал
- Учёт комнат (room_number)
- Учёт писем (привязка к комнате, статус, дата добавления)
- Просмотр количества писем в каждой комнате
- Добавление писем через простую форму (только номер комнаты)
- Просмотр писем по комнате

## Технологии
- Next.js 14 (App Router)
- Supabase (Postgres, RLS)
- React Query
- TailwindCSS

## Структура БД
- **rooms**: id, room_number, telegram_chat_id, created_at
- **letters**: id, room_id, status, created_at, delivered_at, sync_status

## Как работает
1. На главной странице отображается список комнат и количество писем в каждой.
2. Для каждой комнаты можно открыть отдельную страницу (`/room/[roomNumber]`), где отображается список писем и форма для добавления нового письма.
3. Письмо добавляется только по номеру комнаты (штрих-коды не используются).

## Безопасность
- Включён RLS (Row Level Security) для всех таблиц.
- Для MVP insert/update разрешён всем пользователям.

---
PWA и штрих-коды полностью удалены из проекта.

## Быстрый старт

1. Клонировать репозиторий:
```bash
git clone <URL репозитория>
cd email_camp
```

2. Установить зависимости:
```bash
npm install
```

3. Создать файл `.env.local` и добавить переменные окружения:
```
NEXT_PUBLIC_SUPABASE_URL=your-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

4. Запустить проект:
```bash
npm run dev
```

## Документация

- [MVP и план развития](docs/MVP.md)
- [Руководство по разработке](DEVELOPMENT.md)

## Основные возможности

- Регистрация писем по штрих-кодам
- Привязка писем к комнатам
- Уведомления получателей через Telegram
- Отслеживание статуса доставки
- История операций с письмами

## Технический стек

- Next.js 14.1
- TypeScript
- Supabase (База данных и аутентификация)
- React Query (Управление состоянием и кэширование)
- Tailwind CSS (Стилизация)
- Telegram Bot API (Уведомления)

## База данных

Проект использует Supabase для хранения данных. Структура базы данных:

### Таблицы

- `letters` - информация о письмах
- `rooms` - информация о комнатах

### Связи

- Письма связаны с комнатами через `room_id`
- Комнаты могут иметь привязанный Telegram чат для уведомлений

## Разработка

1. Создать новую ветку:
```bash
git checkout -b feature/название-функционала
```

2. Внести изменения и закоммитить:
```bash
git add .
git commit -m "Описание изменений"
```

3. Отправить изменения в репозиторий:
```bash
git push origin feature/название-функционала
```

## Лицензия

MIT 